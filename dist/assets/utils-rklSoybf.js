import{i as V,g as h}from"./usePrimitiveElement-BtVGfiza.js";import{B as H,I as q,i as k,J as I,e as G,C as $,b as X,K as z,u as J}from"./useForwardExpose-B2_o370m.js";import{e as R,b as S,G as U,Q as j,K as C,a0 as Q,d as Z,aa as ee,c as te,o as ne,w as re,g as oe,u as se}from"./index-BKPedEfM.js";import{P as ae}from"./index-CXxZOWHz.js";function F(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function L(e,t,n=".",r){if(!F(t))return L(e,{},n,r);const a=Object.assign({},t);for(const i in e){if(i==="__proto__"||i==="constructor")continue;const c=e[i];c!=null&&(r&&r(a,i,c,n)||(Array.isArray(c)&&Array.isArray(a[i])?a[i]=[...c,...a[i]]:F(c)&&F(a[i])?a[i]=L(c,a[i],(n?`${n}.`:"")+i.toString(),r):a[i]=c))}return a}function ue(e){return(...t)=>t.reduce((n,r)=>L(n,r,"",e),{})}const ie=ue(),ce=H(()=>{const e=S(new Map),t=S(),n=R(()=>{for(const c of e.value.values())if(c)return!0;return!1}),r=V({scrollBody:S(!0)});let a=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",I&&a?.(),t.value=void 0};return U(n,(c,f)=>{if(!k)return;if(!c){f&&i();return}t.value===void 0&&(t.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,d={padding:l,margin:0},u=r.scrollBody?.value?typeof r.scrollBody.value=="object"?ie({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},d):d:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),I&&(a=G(document,"touchmove",o=>le(o),{passive:!1})),j(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function Me(e){const t=Math.random().toString(36).substring(2,7),n=ce();n.value.set(t,e??!1);const r=R({get:()=>n.value.get(t)??!1,set:a=>n.value.set(t,a)});return q(()=>{n.value.delete(t)}),r}function D(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:D(n)}}function le(e){const t=e||window.event,n=t.target;return n instanceof Element&&D(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}let T=0;function Pe(){C(e=>{if(!k)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??M()),document.body.insertAdjacentElement("beforeend",t[1]??M()),T++,e(()=>{T===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),T--})})}function M(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},g=new WeakMap,w=new WeakMap,A={},_=0,W=function(e){return e&&(e.host||W(e.parentNode))},de=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=W(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pe=function(e,t,n,r){var a=de(t,Array.isArray(e)?e:[e]);A[n]||(A[n]=new WeakMap);var i=A[n],c=[],f=new Set,l=new Set(a),d=function(o){!o||f.has(o)||(f.add(o),d(o.parentNode))};a.forEach(d);var u=function(o){!o||l.has(o)||Array.prototype.forEach.call(o.children,function(s){if(f.has(s))u(s);else try{var m=s.getAttribute(r),p=m!==null&&m!=="false",v=(g.get(s)||0)+1,y=(i.get(s)||0)+1;g.set(s,v),i.set(s,y),c.push(s),v===1&&p&&w.set(s,!0),y===1&&s.setAttribute(n,"true"),p||s.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",s,E)}})};return u(t),f.clear(),_++,function(){c.forEach(function(o){var s=g.get(o)-1,m=i.get(o)-1;g.set(o,s),i.set(o,m),s||(w.has(o)||o.removeAttribute(r),w.delete(o)),m||o.removeAttribute(n)}),_--,_||(g=new WeakMap,g=new WeakMap,w=new WeakMap,A={})}},ve=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=fe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),pe(r,a,n,"aria-hidden")):function(){return null}};function Ne(e){let t;U(()=>$(e),n=>{n?t=ve(n):t&&t()}),Q(()=>{t&&t()})}function Be(e){const t=X("",1e3);return{search:t,handleTypeaheadSearch:(a,i)=>{t.value=t.value+a;{const c=h(),f=i.map(s=>({...s,textValue:s.value?.textValue??s.ref.textContent?.trim()??""})),l=f.find(s=>s.ref===c),d=f.map(s=>s.textValue),u=ye(d,t.value,l?.textValue),o=f.find(s=>s.textValue===u);return o&&o.ref.focus(),o?.ref}},resetTypeahead:()=>{t.value=""}}}function me(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function ye(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let c=me(e,Math.max(i,0));a.length===1&&(c=c.filter(d=>d!==n));const l=c.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}const he=z(()=>S([]));function Ee(){const e=he();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=P(e.value,t),e.value.unshift(t)},remove(t){e.value=P(e.value,t),e.value[0]?.resume()}}}function P(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function be(e){return e.filter(t=>t.tagName!=="A")}const O="focusScope.autoFocusOnMount",x="focusScope.autoFocusOnUnmount",N={bubbles:!1,cancelable:!0};function ge(e,{select:t=!1}={}){const n=h();for(const r of e)if(b(r,{select:t}),h()!==n)return!0}function Se(e){const t=Y(e),n=B(t,e),r=B(t.reverse(),e);return[n,r]}function Y(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function B(e,t){for(const n of e)if(!we(n,{upTo:t}))return n}function we(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ae(e){return e instanceof HTMLInputElement&&"select"in e}function b(e,{select:t=!1}={}){if(e&&e.focus){const n=h();e.focus({preventScroll:!0}),e!==n&&Ae(e)&&t&&e.select()}}var Fe=Z({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,r=t,{currentRef:a,currentElement:i}=J(),c=S(null),f=Ee(),l=ee({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});C(u=>{if(!k)return;const o=i.value;if(!n.trapped)return;function s(y){if(l.paused||!o)return;const E=y.target;o.contains(E)?c.value=E:b(c.value,{select:!0})}function m(y){if(l.paused||!o)return;const E=y.relatedTarget;E!==null&&(o.contains(E)||b(c.value,{select:!0}))}function p(y){o.contains(c.value)||b(o)}document.addEventListener("focusin",s),document.addEventListener("focusout",m);const v=new MutationObserver(p);o&&v.observe(o,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",s),document.removeEventListener("focusout",m),v.disconnect()})}),C(async u=>{const o=i.value;if(await j(),!o)return;f.add(l);const s=h();if(!o.contains(s)){const p=new CustomEvent(O,N);o.addEventListener(O,v=>r("mountAutoFocus",v)),o.dispatchEvent(p),p.defaultPrevented||(ge(be(Y(o)),{select:!0}),h()===s&&b(o))}u(()=>{o.removeEventListener(O,y=>r("mountAutoFocus",y));const p=new CustomEvent(x,N),v=y=>{r("unmountAutoFocus",y)};o.addEventListener(x,v),o.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||b(s??document.body,{select:!0}),o.removeEventListener(x,v),f.remove(l)},0)})});function d(u){if(!n.loop&&!n.trapped||l.paused)return;const o=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,s=h();if(o&&s){const m=u.currentTarget,[p,v]=Se(m);p&&v?!u.shiftKey&&s===v?(u.preventDefault(),n.loop&&b(p,{select:!0})):u.shiftKey&&s===p&&(u.preventDefault(),n.loop&&b(v,{select:!0})):s===m&&u.preventDefault()}}return(u,o)=>(ne(),te(se(ae),{ref_key:"currentRef",ref:a,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:d},{default:re(()=>[oe(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),Ke=Fe;const Re="menu.itemSelect",K=["Enter"," "],Te=["ArrowDown","PageUp","Home"],_e=["ArrowUp","PageDown","End"],Ue=[...Te,..._e],je={ltr:[...K,"ArrowRight"],rtl:[...K,"ArrowLeft"]},De={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function We(e){return e?"open":"closed"}function Oe(e){return e==="indeterminate"}function Ye(e){return Oe(e)?"indeterminate":e?"checked":"unchecked"}function Ve(e){const t=h();for(const n of e)if(n===t||(n.focus(),h()!==t))return}function xe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const f=t[i].x,l=t[i].y,d=t[c].x,u=t[c].y;l>r!=u>r&&n<(d-f)*(r-l)/(u-l)+f&&(a=!a)}return a}function He(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return xe(n,t)}function qe(e){return e.pointerType==="mouse"}export{Ke as F,Re as I,_e as L,K as S,Pe as a,Me as b,Ne as c,Ue as d,qe as e,Ve as f,We as g,Ye as h,He as i,Oe as j,De as k,je as l,Be as u};
